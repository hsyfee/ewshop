(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3936ff8a"],{"0266":function(e,t,c){},"0451":function(e,t,c){"use strict";c("808f")},"31e4":function(e,t,c){"use strict";c("0266")},"808f":function(e,t,c){},bb51:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),o=Object(n["R"])("data-v-02eda84e");Object(n["A"])("data-v-02eda84e");var a=Object(n["h"])("商品分类"),l={id:"mainbox"},i={class:"ordertab"},u={class:"goodslist"},s={class:"content"};Object(n["y"])();var r=o((function(e,t,c,r,b,d){var f=Object(n["F"])("nav-bar"),v=Object(n["F"])("van-tab"),j=Object(n["F"])("van-tabs"),O=Object(n["F"])("van-sidebar-item"),p=Object(n["F"])("van-collapse-item"),m=Object(n["F"])("van-collapse"),g=Object(n["F"])("van-sidebar"),h=Object(n["F"])("van-card"),k=Object(n["F"])("back-top");return Object(n["x"])(),Object(n["f"])("div",null,[Object(n["i"])(f,null,{default:o((function(){return[a]})),_:1}),Object(n["i"])("div",l,[Object(n["i"])("div",i,[Object(n["i"])(j,{onClick:r.tabClick,modelValue:r.active,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.active=e})},{default:o((function(){return[Object(n["i"])(v,{title:"销量排序"}),Object(n["i"])(v,{title:"价格排序"}),Object(n["i"])(v,{title:"评论排序"})]})),_:1},8,["onClick","modelValue"])]),Object(n["i"])(g,{class:"leftmenu",modelValue:r.activeKey,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.activeKey=e})},{default:o((function(){return[Object(n["i"])(m,{modelValue:r.activeName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.activeName=e}),accordion:""},{default:o((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(r.categories,(function(e){return Object(n["x"])(),Object(n["f"])(p,{key:e,title:e.name,name:e.name},{default:o((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(e.children,(function(e){return Object(n["x"])(),Object(n["f"])(O,{key:e,title:e.name,onClick:function(t){return r.getGoods(e.id)}},null,8,["title","onClick"])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"]),Object(n["i"])("div",u,[Object(n["i"])("div",s,[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(r.showGoods,(function(e){return Object(n["x"])(),Object(n["f"])(h,{key:e.id,onClick:function(t){return r.itemClick(e.id)},num:e.sales,tag:e.sales>=0?"流行":"不流行",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url,"lazy-load":!0},null,8,["onClick","num","tag","price","desc","title","thumb"])})),128))])])]),Object(n["P"])(Object(n["i"])(k,{onBTop:r.bTop},null,8,["onBTop"]),[[n["L"],r.isShowBackTop]])])})),b=c("2909"),d=c("a7ac"),f=c("6c02"),v=c("1bab");function j(){return Object(v["a"])({url:"/api/goods"})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(v["a"])({url:"/api/goods?category_id="+t+"&page="+c+"&"+e+"=1"})}var p=c("f40f"),m=c("725f"),g={name:"Category",setup:function(){var e=Object(f["d"])(),t=Object(n["C"])(1),c=Object(n["C"])(0),o=Object(n["C"])(1),a=Object(n["C"])([]),l=Object(n["C"])(!1),i=Object(n["C"])("sales"),u=Object(n["C"])(0),s=Object(n["B"])({sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}}),r=Object(n["d"])((function(){return s[i.value].list})),d=function(){O("sales",u.value).then((function(e){s["sales"].list=e.goods.data})).catch((function(e){})),O("price",u.value).then((function(e){s["price"].list=e.goods.data})).catch((function(e){})),O("comments_count",u.value).then((function(e){s["comments_count"].list=e.goods.data})).catch((function(e){}))},v=Object(n["B"])({});Object(n["u"])((function(){j().then((function(e){a.value=e.categories})).catch((function(e){})),d(),v=new p["a"](document.querySelector(".goodslist"),{probeType:3,click:!0,pullUpLoad:!0}),v.on("scroll",(function(e){l.value=-e.y>300})),v.on("pullingUp",(function(){console.log("上拉加载数据.....");var e=s[i.value].page+1;O(i.value,u.value).then((function(e){var t;(t=s[i.value].list).push.apply(t,Object(b["a"])(e.goods.data)),s[i.value].page+=1})).catch((function(e){})),v.finishPullUp(),v.refresh(),console.log("contentheight:"+document.querySelector(".content").clientHeight),console.log("当前类型："+i.value+"当前页："+e)}))})),Object(n["N"])((function(){Object(n["p"])((function(){v&&v.refresh()}))}));var m=function(e){var t=["sales","price","comments_count"];i.value=t[e],O(i.value,u.value).then((function(e){s[i.value].list=e.goods.data,Object(n["p"])((function(){v&&v.refresh()}))})),console.log("当前分类id:"+u.value),console.log("当前排序方式:"+i.value)},g=function(e){u.value=e,d(),console.log("当前分类id:"+u.value),console.log("当前排序方式:"+i.value)},h=function(){v.scrollTo(0,0,500)};return{active:t,activeKey:c,activeName:o,categories:a,tabClick:m,getGoods:g,goods:s,showGoods:r,bscroll:v,isShowBackTop:l,bTop:h,itemClick:function(t){e.push({path:"/detail",query:{id:t}})}}},components:{NavBar:d["a"],BackTop:m["a"]}};c("0451"),c("31e4");g.render=r,g.__scopeId="data-v-02eda84e";t["default"]=g}}]);
//# sourceMappingURL=chunk-3936ff8a.eafad1c2.js.map